

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>9.1.4.12. Spline &mdash; Patro 0.3.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../static/css/Patro.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="9.1.4.13. Transformation" href="Transformation.html" />
    <link rel="prev" title="9.1.4.11. Segment" href="Segment.html" /> 

  
  <script src="../../../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Patro
          

          
            
            <img src="../../../static/logo-64.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#what-is-patro">1.1. What is Patro ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#what-is-the-purpose-of-this-library">1.2. What is the purpose of this library ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#what-are-the-features-of-patro">1.3. What are the Features of Patro ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#how-is-patro-licensed">1.4. How is Patro licensed ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#going-further-with-patro">1.5. Going further with Patro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#which-platforms-are-supported-by-patro">1.6. Which platforms are supported by Patro ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#how-to-install-patro">1.7. How to install Patro ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview.html#which-version-of-python-is-required">1.8. Which version of Python is required ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../features-all.html">2. Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../features-all.html#geometry-engine">2.1. Geometry Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../features-all.html#pattern-engine">2.2. Pattern Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../features-all.html#graphic-engine">2.3. Graphic Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../features-all.html#pattern-format-support">2.4. Pattern Format Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../features-all.html#pattern-format-compatibility">2.4.1. Pattern Format Compatibility</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../valentina-compatibility/index.html">2.4.1.1. Valentina Compatibility</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../features-all.html#digitalisation">2.5. Digitalisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../news.html">3. News</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../news.html#v0-2017-02-16">3.1. V0 2017-02-16</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../roadmap.html">4. Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">5. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#on-windows">5.1. On Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#on-linux">5.2. On Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#on-osx">5.3. On OSX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#installation-from-pypi-repository">5.4. Installation from PyPi Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#install-a-more-recent-version-from-github">5.5. Install a more recent version from Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#installation-from-source">5.6. Installation from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#dependencies">5.7. Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples.html">6. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">7. User FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../faq.html#how-to-get-help-or-report-an-issue">7.1. How to get help or report an issue ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../design-notes.html">8. Design Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../design-notes.html#what-is-my-opinion-on-valentina-seamly2d">8.1. What is my opinion on Valentina / Seamly2D ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../design-notes.html#can-we-implement-such-a-tool-as-a-plugin-of-another-software">8.2. Can we implement such a tool as a plugin of another software ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../design-notes.html#what-is-the-requirements-of-a-pattern-drafting-software">8.3. What is the requirements of a pattern drafting software ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../design-notes.html#why-python-is-a-good-language-for-this-library">8.4. Why Python is a good language for this library ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../design-notes.html#could-we-implement-a-full-software-using-python">8.5. Could we implement a full software using Python ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../design-notes.html#how-to-generate-drawings-in-standard-format-like-pdf-or-svg">8.6. How to generate drawings in standard format like PDF or SVG ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../design-notes.html#what-is-the-requirements-of-a-geometric-engine">8.7. What is the requirements of a geometric engine ?</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../reference-manual.html">9. API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../Patro.html">9.1. Patro</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Common.html">9.1.1. Common</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Common/AtomicCounter.html">9.1.1.1. AtomicCounter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Datetime.html">9.1.1.2. Datetime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Graph.html">9.1.1.3. Graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/IterTools.html">9.1.1.4. IterTools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Logging.html">9.1.1.5. Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Math.html">9.1.1.6. Math</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Object.html">9.1.1.7. Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Path.html">9.1.1.8. Path</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Platform.html">9.1.1.9. Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Singleton.html">9.1.1.10. Singleton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Common/Xml.html">9.1.1.11. Xml</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Config.html">9.1.2. Config</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Config/ConfigInstall.html">9.1.2.1. ConfigInstall</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../FileFormat.html">9.1.3. FileFormat</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../FileFormat/Dxf.html">9.1.3.1. Dxf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../FileFormat/Svg.html">9.1.3.2. Svg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../FileFormat/Valentina.html">9.1.3.3. Valentina</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="../GeometryEngine.html">9.1.4. GeometryEngine</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="Bezier.html">9.1.4.1. Bezier</a></li>
<li class="toctree-l4"><a class="reference internal" href="BoundingBox.html">9.1.4.2. BoundingBox</a></li>
<li class="toctree-l4"><a class="reference internal" href="Conic.html">9.1.4.3. Conic</a></li>
<li class="toctree-l4"><a class="reference internal" href="Interpolation.html">9.1.4.4. Interpolation</a></li>
<li class="toctree-l4"><a class="reference internal" href="Line.html">9.1.4.5. Line</a></li>
<li class="toctree-l4"><a class="reference internal" href="Path.html">9.1.4.6. Path</a></li>
<li class="toctree-l4"><a class="reference internal" href="Polygon.html">9.1.4.7. Polygon</a></li>
<li class="toctree-l4"><a class="reference internal" href="Polyline.html">9.1.4.8. Polyline</a></li>
<li class="toctree-l4"><a class="reference internal" href="Primitive.html">9.1.4.9. Primitive</a></li>
<li class="toctree-l4"><a class="reference internal" href="Rectangle.html">9.1.4.10. Rectangle</a></li>
<li class="toctree-l4"><a class="reference internal" href="Segment.html">9.1.4.11. Segment</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">9.1.4.12. Spline</a></li>
<li class="toctree-l4"><a class="reference internal" href="Transformation.html">9.1.4.13. Transformation</a></li>
<li class="toctree-l4"><a class="reference internal" href="Triangle.html">9.1.4.14. Triangle</a></li>
<li class="toctree-l4"><a class="reference internal" href="Vector.html">9.1.4.15. Vector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../GeometryEngine.html#purpose">9.1.4.16. Purpose</a></li>
<li class="toctree-l4"><a class="reference internal" href="../GeometryEngine.html#bibliographical-references">9.1.4.17. Bibliographical References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../GraphicEngine.html">9.1.5. GraphicEngine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../GraphicEngine/GraphicScene.html">9.1.5.1. GraphicScene</a></li>
<li class="toctree-l4"><a class="reference internal" href="../GraphicEngine/Painter.html">9.1.5.2. Painter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../GraphicEngine/TeX.html">9.1.5.3. TeX</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../GraphicStyle.html">9.1.6. GraphicStyle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../GraphicStyle/Color.html">9.1.6.1. Color</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Measurement.html">9.1.7. Measurement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Measurement/Measurement.html">9.1.7.1. Measurement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Measurement/PersonalData.html">9.1.7.2. PersonalData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Measurement/StandardMeasurement.html">9.1.7.3. StandardMeasurement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Measurement/ValentinaMeasurement.html">9.1.7.4. ValentinaMeasurement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Measurement/ValentinaStandardMeasurement.html">9.1.7.5. ValentinaStandardMeasurement</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Pattern.html">9.1.8. Pattern</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Pattern/Calculator.html">9.1.8.1. Calculator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Pattern/Pattern.html">9.1.8.2. Pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Pattern/Sketch.html">9.1.8.3. Sketch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Pattern/SketchOperation.html">9.1.8.4. SketchOperation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../QtApplication.html">9.1.9. QtApplication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../QtApplication/QmlApplication.html">9.1.9.1. QmlApplication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference-manual.html#indexes">9.2. Indexes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../development.html">10. Development &amp; Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#how-you-can-help">10.1. How you can help ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#contributors">10.2. Contributors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../how-to-refer.html">11. How to Refer to Patro ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../donate.html">12. How to Help Further ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../related-projects.html">13. Related Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bibliography.html">14. Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Patro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../reference-manual.html">9. API Documentation</a> &raquo;</li>
        
          <li><a href="../../Patro.html">9.1. Patro</a> &raquo;</li>
        
          <li><a href="../GeometryEngine.html">9.1.4. GeometryEngine</a> &raquo;</li>
        
      <li>9.1.4.12. Spline</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/api/Patro/GeometryEngine/Spline.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-Patro.GeometryEngine.Spline">
<span id="spline"></span><h1>9.1.4.12. Spline<a class="headerlink" href="#module-Patro.GeometryEngine.Spline" title="Permalink to this headline">¶</a></h1>
<p>Module to implement Spline curve.</p>
<div class="section" id="b-spline-basis">
<h2>9.1.4.12.1. B-spline Basis<a class="headerlink" href="#b-spline-basis" title="Permalink to this headline">¶</a></h2>
<p>A nonuniform, nonrational B-spline of order <cite>k</cite> is a piecewise polynomial function of degree
<span class="math notranslate nohighlight">\(k - 1\)</span> in a variable <cite>t</cite>.</p>
<p>A set of non-descending breaking points, called knot, <span class="math notranslate nohighlight">\(t_0 \le t_1 \le \ldots \le t_m\)</span> defines
a knot vector <span class="math notranslate nohighlight">\(T = (t_0, \ldots, t_{m})\)</span>.</p>
<p>If each knot is separated by the same distance <cite>h</cite> (where <span class="math notranslate nohighlight">\(h = t_{i+1} - t_i\)</span>) from its
predecessor, the knot vector and the corresponding B-splines are called “uniform”.</p>
<p>Given a knot vector <cite>T</cite>, the associated B-spline basis functions, <span class="math notranslate nohighlight">\(B_i^k(t)\)</span> are defined as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}B_i^1(t) =
\left\lbrace
\begin{array}{l}
   1 \;\textrm{if}\; t_i \le t &lt; t_{i+1} \\
   0 \;\textrm{otherwise}
\end{array}
\right.\end{split}\]</div>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
 B_i^k(t) &amp;= \frac{t - t_i}{t_{i+k-1} - t_i} B_i^{k-1}(t)
           + \frac{t_{i+k} - t}{t_{i+k} - t_{i+1}} B_{i+1}^{k-1}(t) \\
          &amp;= w_i^{k-1}(t) B_i^{k-1}(t) + [1 - w_{i+1}^{k-1}(t)] B_{i+1}^{k-1}(t)
\end{split}\end{split}\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[\begin{split}w_i^k(t) =
\left\lbrace
\begin{array}{l}
   \frac{t - t_i}{t_{i+k} - t_i} \;\textrm{if}\; t_i &lt; t_{i+k} \\
   0 \;\textrm{otherwise}
\end{array}
\right.\end{split}\]</div>
<p>These equations have the following properties, for <span class="math notranslate nohighlight">\(k &gt; 1\)</span> and <span class="math notranslate nohighlight">\(i = 0, 1, \ldots, n\)</span> :</p>
<ul class="simple">
<li>Positivity: <span class="math notranslate nohighlight">\(B_i^k(t) &gt; 0\)</span>, for <span class="math notranslate nohighlight">\(t_i &lt; t &lt; t_{i+k}\)</span></li>
<li>Local Support: <span class="math notranslate nohighlight">\(B_i^k(t) = 0\)</span>, for <span class="math notranslate nohighlight">\(t_0 \le t \le t_i\)</span> and <span class="math notranslate nohighlight">\(t_{i+k} \le t \le t_{n+k}\)</span></li>
<li>Partition of unity: <span class="math notranslate nohighlight">\(\sum_{i=0}^n B_i^k(t)= 1\)</span>, for <span class="math notranslate nohighlight">\(t \in [t_0, t_m]\)</span></li>
<li>Continuity: <span class="math notranslate nohighlight">\(B_i^k(t)\)</span> as <span class="math notranslate nohighlight">\(C^{k-2}\)</span> continuity at each simple knot</li>
</ul>
</div>
<div class="section" id="b-spline-curve">
<h2>9.1.4.12.2. B-spline Curve<a class="headerlink" href="#b-spline-curve" title="Permalink to this headline">¶</a></h2>
<p>A B-spline curve of order <cite>k</cite> is defined as a linear combination of control points <span class="math notranslate nohighlight">\(p_i\)</span> and
B-spline basis functions <span class="math notranslate nohighlight">\(B_i^k(t)\)</span> given by</p>
<div class="math notranslate nohighlight">
\[S^k(t) = \sum_{i=0}^{n} p_i\; B_i^k(t) ,\quad n \ge k - 1,\; t \in [t_{k-1}, t_{n+1}]\]</div>
<p>In this context the control points are called De Boor points. The basis functions <span class="math notranslate nohighlight">\(B_i^k(t)\)</span>
is defined on a knot vector</p>
<div class="math notranslate nohighlight">
\[T = (t_0, t_1, \ldots, t_{k-1}, t_k, t_{k+1}, \ldots, t_{n-1}, t_n, t_{n+1}, \ldots, t_{n+k})\]</div>
<p>where there are <span class="math notranslate nohighlight">\(n+k+1\)</span> elements, i.e. the number of control points <span class="math notranslate nohighlight">\(n+1\)</span> plus the order
of the curve <cite>k</cite>.  Each knot span <span class="math notranslate nohighlight">\(t_i \le t \le t_{i+1}\)</span> is mapped onto a polynomial curve
between two successive joints <span class="math notranslate nohighlight">\(S(t_i)\)</span> and <span class="math notranslate nohighlight">\(S(t_{i+1})\)</span>.</p>
<p>Unlike Bézier curves, B-spline curves do not in general pass through the two end control points.
Increasing the multiplicity of a knot reduces the continuity of the curve at that knot.
Specifically, the curve is <span class="math notranslate nohighlight">\((k-p-1)\)</span> times continuously differentiable at a knot with
multiplicity <span class="math notranslate nohighlight">\(p (\le k)\)</span>, and thus has <span class="math notranslate nohighlight">\(C^{k-p-1}\)</span> continuity.  Therefore, the control
polygon will coincide with the curve at a knot of multiplicity <span class="math notranslate nohighlight">\(k-1\)</span>, and a knot with
multiplicity <cite>k</cite> indicates <span class="math notranslate nohighlight">\(C^{-1}\)</span> continuity, or a discontinuous curve.  Repeating the knots
at the end <cite>k</cite> times will force the endpoints to coincide with the control polygon.  Thus the first
and the last control points of a curve with a knot vector described by</p>
<div class="math notranslate nohighlight">
\[\begin{eqnarray}
T = (
\underbrace{t_0, t_1, \ldots, t_{k-1},}_{\mbox{$k$ equal knots}}
\quad
\underbrace{t_k, t_{k+1}, \ldots, t_{n-1}, t_n,}_{\mbox{$n$-$k$+1 internal knots}}
\quad
\underbrace{t_{n+1}, \ldots, t_{n+k}}_{\mbox{$k$ equal knots}})
\end{eqnarray}\]</div>
<p>coincide with the endpoints of the curve.  Such knot vectors and curves are known as <em>clamped</em>. In
other words, <em>clamped/unclamped</em> refers to whether both ends of the knot vector have multiplicity
equal to <cite>k</cite> or not.</p>
<p><strong>Local support property</strong>: A single span of a B-spline curve is controlled only by <cite>k</cite> control
points, and any control point affects <cite>k</cite> spans.  Specifically, changing <span class="math notranslate nohighlight">\(p_i\)</span> affects the
curve in the parameter range <span class="math notranslate nohighlight">\(t_i &lt; t &lt; t_{i+k}\)</span> and the curve at a point where <span class="math notranslate nohighlight">\(t_r &lt; t
&lt; t_{r+1}\)</span> is determined completely by the control points <span class="math notranslate nohighlight">\(p_{r-(k-1)}, \ldots, p_r\)</span>.</p>
<p><strong>B-spline to Bézier property</strong>: From the discussion of end points geometric property, it can be
seen that a Bézier curve of order <cite>k</cite> (degree <span class="math notranslate nohighlight">\(k-1\)</span>) is a B-spline curve with no internal
knots and the end knots repeated <cite>k</cite> times.  The knot vector is thus</p>
<div class="math notranslate nohighlight">
\[\begin{eqnarray}
   T = (
   \underbrace{t_0, t_1, \ldots, t_{k-1}}_{\mbox{$k$ equal knots}}
   ,\quad
   \underbrace{t_{n+1}, \ldots, t_{n+k}}_{\mbox{$k$ equal knots}}
   )
   \end{eqnarray}\]</div>
<p>where <span class="math notranslate nohighlight">\(n+k+1 = 2k\)</span> or <span class="math notranslate nohighlight">\(n = k-1\)</span>.</p>
</div>
<div class="section" id="algorithms-for-b-spline-curves">
<h2>9.1.4.12.3. Algorithms for B-spline curves<a class="headerlink" href="#algorithms-for-b-spline-curves" title="Permalink to this headline">¶</a></h2>
<div class="section" id="evaluation-and-subdivision-algorithm">
<h3>9.1.4.12.3.1. Evaluation and subdivision algorithm<a class="headerlink" href="#evaluation-and-subdivision-algorithm" title="Permalink to this headline">¶</a></h3>
<p>A B-spline curve can be evaluated at a specific parameter value <cite>t</cite> using the de Boor algorithm,
which is a generalization of the de Casteljau algorithm.  The repeated substitution of the recursive
definition of the B-spline basis function into the previous definition and re-indexing leads to the
following de Boor algorithm:</p>
<div class="math notranslate nohighlight">
\[S(t) = \sum_{i=0}^{n+j} p_i^j B_i^{k-j}(t) ,\quad j = 0, 1, \ldots, k-1\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[p_i^j = \Big[1 - w_i^j\Big] p_{i-1}^{j-1} + w_i^j p_i^{j-1}, \; j &gt; 0\]</div>
<p>with</p>
<div class="math notranslate nohighlight">
\[w_i^j = \frac{t - t_i}{t_{i+k-j} - t_i} \quad \textrm{and} \; p_j^0 = p_j\]</div>
<p>For <span class="math notranslate nohighlight">\(j = k-1\)</span>, the B-spline basis function reduces to <span class="math notranslate nohighlight">\(B_l^1\)</span> for <span class="math notranslate nohighlight">\(t \in [t_l,
t_{l+1}]\)</span>, and <span class="math notranslate nohighlight">\(p_l^{k-1}\)</span> coincides with the curve <span class="math notranslate nohighlight">\(S(t) = p_l^{k-1}\)</span>.</p>
<p>The de Boor algorithm is a generalization of the de Casteljau algorithm. The de Boor algorithm also
permits the subdivision of the B-spline curve into two segments of the same order.</p>
</div>
<div class="section" id="de-boor-algorithm">
<h3>9.1.4.12.3.2. De Boor Algorithm<a class="headerlink" href="#de-boor-algorithm" title="Permalink to this headline">¶</a></h3>
<p>Let the index <cite>l</cite> define the knot interval that contains the position, <span class="math notranslate nohighlight">\(t \in [t_l ,
t_{l+1}]\)</span>.  We can see in the recursion formula that only B-splines with <span class="math notranslate nohighlight">\(i = l-K, \dots, l\)</span>
are non-zero for this knot interval, where <span class="math notranslate nohighlight">\(K = k - 1\)</span> is the degree.  Thus, the sum is
reduced to:</p>
<div class="math notranslate nohighlight">
\[S^k(t) = \sum _{i=l-K}^{l} p_{i} B_i^k(t)\]</div>
<p>The algorithm does not compute the B-spline functions <span class="math notranslate nohighlight">\(B_i^k(t)\)</span> directly.  Instead it
evaluates <span class="math notranslate nohighlight">\(S(t)\)</span> through an equivalent recursion formula.</p>
<p>Let <span class="math notranslate nohighlight">\(d _i^r\)</span> be new control points with <span class="math notranslate nohighlight">\(d_i^1 = p_i\)</span> for <span class="math notranslate nohighlight">\(i = l-K, \dots, l\)</span>.</p>
<p>For <span class="math notranslate nohighlight">\(r = 2, \dots, k\)</span> the following recursion is applied:</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}d_i^r = (1 - w_i^r) d_{i-1}^{r-1} + w_i^r d_i^{r-1} \quad i = l-K+r, \dots, l\\w_i^r = \frac{t - t_i}{t_{i+1+l-r} - t_{i}}\end{aligned}\end{align} \]</div>
<p>Once the iterations are complete, we have <span class="math notranslate nohighlight">\(S^k(t) = d_l^k\)</span>.</p>
<p>De Boor’s algorithm is more efficient than an explicit calculation of B-splines <span class="math notranslate nohighlight">\(B_i^k(t)\)</span>
with the Cox-de Boor recursion formula, because it does not compute terms which are guaranteed to be
multiplied by zero.</p>
</div>
<div class="section" id="knot-insertion">
<h3>9.1.4.12.3.3. Knot insertion<a class="headerlink" href="#knot-insertion" title="Permalink to this headline">¶</a></h3>
<p>A knot can be inserted into a B-spline curve without changing the
geometry of the curve.  The new curve is identical to</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{lcl}
\sum_{i=0}^n p_i B_i^k(t) &amp; \textrm{becomes} &amp; \sum_{i=0}^{n+1} \bar{p}_i \bar B_i^k(t) \\
\mbox{over}\; T = (t_0, t_1, \ldots, t_l, t_{l+1}, \ldots) &amp; &amp;
\mbox{over}\; T = (t_0, t_1, \ldots, t_l, \bar t, t_{l+1}, \ldots) &amp; &amp;
\end{array}\end{split}\]</div>
<p>when a new knot <span class="math notranslate nohighlight">\(\bar t\)</span> is inserted between knots <span class="math notranslate nohighlight">\(t_l\)</span> and <span class="math notranslate nohighlight">\(t_{l+1}\)</span>.  The new
de Boor points are given by</p>
<div class="math notranslate nohighlight">
\[\bar{p}_i = (1 - w_i) p_{i-1} + w_i p_i\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[\begin{split}w_i =
\left\{ \begin{array}{ll}
1 &amp; i \le l-k+1 \\
0 &amp; i \ge l+1 \\
\frac{\bar{t} - t_i}{t_{l+k-1} - t_i} &amp; l-k+2 \le i \leq l
\end{array}
\right.\end{split}\]</div>
<p>The above algorithm is also known as <strong>Boehm’s algorithm</strong>.  A more general (but also more complex)
insertion algorithm permitting insertion of several (possibly multiple) knots into a B-spline knot
vector, known as the Oslo algorithm, was developed by Cohen et al.</p>
<p>A B-spline curve is <span class="math notranslate nohighlight">\(C^{\infty}\)</span> continuous in the interior of a span.  Within exact
arithmetic, inserting a knot does not change the curve, so it does not change the continuity.
However, if any of the control points are moved after knot insertion, the continuity at the knot
will become <span class="math notranslate nohighlight">\(C^{k-p-1}\)</span>, where <cite>p</cite> is the multiplicity of the knot.</p>
<p>The B-spline curve can be subdivided into Bézier segments by knot insertion at each internal knot
until the multiplicity of each internal knot is equal to <cite>k</cite>.</p>
</div>
</div>
<div class="section" id="references">
<h2>9.1.4.12.4. References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Computer Graphics, Principle and Practice, Foley et al., Adison Wesley</li>
<li><a class="reference external" href="http://web.mit.edu/hyperbook/Patrikalakis-Maekawa-Cho/node15.html">http://web.mit.edu/hyperbook/Patrikalakis-Maekawa-Cho/node15.html</a></li>
</ul>
<dl class="class">
<dt id="Patro.GeometryEngine.Spline.BSpline2D">
<em class="property">class </em><code class="descclassname">Patro.GeometryEngine.Spline.</code><code class="descname">BSpline2D</code><span class="sig-paren">(</span><em>points</em>, <em>degree</em>, <em>closed=False</em>, <em>knots=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="Primitive.html#Patro.GeometryEngine.Primitive.Primitive2DMixin" title="Patro.GeometryEngine.Primitive.Primitive2DMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">Patro.GeometryEngine.Primitive.Primitive2DMixin</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Patro.GeometryEngine.Primitive.PrimitiveNP</span></code></p>
<p>Class to implement a 2D B-Spline curve.</p>
<dl class="method">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.basis_function">
<code class="descname">basis_function</code><span class="sig-paren">(</span><em>i</em>, <em>k</em>, <em>t</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.basis_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.basis_function" title="Permalink to this definition">¶</a></dt>
<dd><p>De Boor-Cox recursion formula</p>
</dd></dl>

<dl class="classmethod">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.check_for_unifom_knots">
<em class="property">classmethod </em><code class="descname">check_for_unifom_knots</code><span class="sig-paren">(</span><em>degree</em>, <em>number_of_points</em>, <em>knots</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.check_for_unifom_knots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.check_for_unifom_knots" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.degree">
<code class="descname">degree</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.degree" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.end_knot">
<code class="descname">end_knot</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.end_knot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.insert_knot">
<code class="descname">insert_knot</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.insert_knot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.insert_knot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.is_closed">
<code class="descname">is_closed</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.is_closed" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the primitive is a closed path.</p>
</dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.knot_iter">
<code class="descname">knot_iter</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.knot_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.knot_multiplicity">
<code class="descname">knot_multiplicity</code><span class="sig-paren">(</span><em>knot</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.knot_multiplicity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.knot_multiplicity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.knots">
<code class="descname">knots</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.knots" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.number_of_spans">
<code class="descname">number_of_spans</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.number_of_spans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.order">
<code class="descname">order</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.point_at_t">
<code class="descname">point_at_t</code><span class="sig-paren">(</span><em>t</em>, <em>naive=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.point_at_t"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.point_at_t" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.span">
<code class="descname">span</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.span"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.span" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.start_knot">
<code class="descname">start_knot</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.start_knot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.to_bezier">
<code class="descname">to_bezier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.to_bezier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.to_bezier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.to_bezier_form">
<code class="descname">to_bezier_form</code><span class="sig-paren">(</span><em>degree=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.to_bezier_form"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.to_bezier_form" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.uniform">
<code class="descname">uniform</code><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.uniform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="Patro.GeometryEngine.Spline.BSpline2D.uniform_knots">
<em class="property">static </em><code class="descname">uniform_knots</code><span class="sig-paren">(</span><em>degree</em>, <em>number_of_points</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/Patro/GeometryEngine/Spline.html#BSpline2D.uniform_knots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Patro.GeometryEngine.Spline.BSpline2D.uniform_knots" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Transformation.html" class="btn btn-neutral float-right" title="9.1.4.13. Transformation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Segment.html" class="btn btn-neutral" title="9.1.4.11. Segment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Fabrice Salvaire

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../static/jquery.js"></script>
        <script type="text/javascript" src="../../../static/underscore.js"></script>
        <script type="text/javascript" src="../../../static/doctools.js"></script>
        <script type="text/javascript" src="../../../static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/javascript" src="../../../static/getthecode.js"></script>
    

  

  <script type="text/javascript" src="../../../static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>